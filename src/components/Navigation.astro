---
import { Image } from "astro:assets";

import Email from "../components/Email.astro";
import type { Link } from "../types";

interface Props {
    name: string;
    icon: ImageMetadata;
    links: Link[];
}

// Get the href for the home page
const { name, icon, links } = Astro.props;
---

<nav>
    <div class="flex flex-wrap items-center justify-between">
        <a
            href={links[0].href}
            class="flex items-center space-x-3 rtl:space-x-reverse"
        >
            <Image
                class="w-6 h-6"
                src={icon}
                alt="Go to homepage"
                loading="eager"
            />
            <span class="self-center font-semibold whitespace-nowrap"
                >{name}</span
            >
        </a>
        <button
            id="navbar-toggle"
            data-collapse-toggle="navbar-default"
            type="button"
            class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden"
            aria-controls="navbar-default"
            aria-expanded="false"
        >
            <span class="sr-only">Open navigation</span>
            <svg
                aria-hidden="true"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="black"
                class="w-5 h-5"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path>
            </svg>
        </button>
        <div class="hidden w-full md:block md:w-auto" id="navbar-default">
            <ul
                class="flex flex-col border-t border-zinc-400 p-2 mt-4 md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0"
            >
                {
                    links.map(link => (
                        <li>
                            <a
                                href={link.href}
                                class="block py-2 md:p-0 hover:text-[color:var(--accent)]"
                            >
                                {link.text}
                            </a>
                        </li>
                    ))
                }
                <Email>
                    <li>
                        <a
                            class="block py-2 md:p-0 hover:text-[color:var(--accent)]"
                            href="javascript:mail();">Support</a
                        >
                    </li>
                </Email>
            </ul>
        </div>
    </div>
</nav>

<script is:inline>
    document
        .getElementById("navbar-toggle")
        .addEventListener("click", function () {
            const navbar = document.getElementById("navbar-default");
            navbar.classList.toggle("hidden");
        });
</script>
